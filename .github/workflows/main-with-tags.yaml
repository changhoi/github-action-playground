name: Main With Tag
on: 
  push:
    branches:
      - "main"
    tags:
      - "*"
jobs:
  branch-extract:
    if: github.ref_type == 'branch'
    runs-on: ubuntu-latest
    outputs:
      branch_name: ${{github.ref_name}}
    steps:
      - run: "echo extract branch name ${{github.ref_name}}"

  stage-deploy:
    if: github.ref_type == 'branch'
    runs-on: ubuntu-latest
    steps:
      - run: echo "hello stage world"

  just-tag:
    if: github.ref_type == 'tag' 
    runs-on: ubuntu-latest
    steps:
      - name: Echo Branch
        run: echo "${{ github.event.base_ref }}"
